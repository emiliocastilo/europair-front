<div class="modal">
  <div class="modal-content">
    <section class="modal-header">
      <h4>{{ title }}</h4>
      <a class="waves-effect btn-flat modal-close europair-button-blue-1">
        <i class="material-icons right">close</i>
        Cancelar
      </a>
    </section>
    <section class="aircraft-detail-form cmd-m-2">
      <form [formGroup]="aircraftForm">
        <div class="row">
          <core-select
            [items]="operators"
            [itemValue]="selectItemValue"
            [itemDescription]="selectItemDescription"
            [hasErrors]="hasControlAnyError('operator')"
            [id]="'id'"
            [label]="'Operador'"
            [searchable]="true"
            [placeholder]="'Selecciona a un Operador'"
            [formControl]="this.aircraftForm.get('operator')"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('operator')">
                <span
                  *ngIf="this.aircraftForm.get('operator').errors.required"
                  class="helper-text"
                  data-error="Debe indicar un Operador"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-select>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-quantity'"
            [type]="'number'"
            [label]="'Cantidad'"
            [hasErrors]="hasControlAnyError('quantity')"
            formControlName="quantity"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('quantity')">
                <span
                  *ngIf="hasControlSpecificError('quantity', 'required')"
                  class="helper-text"
                  data-error="Debe indicar una cantidad"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-select
            [items]="aircraftTypes"
            [itemValue]="selectItemValue"
            [itemDescription]="selectItemDescription"
            [hasErrors]="hasControlAnyError('aircraftType')"
            [id]="'id'"
            [label]="'Tipo'"
            [searchable]="true"
            [placeholder]="'Selecciona un Tipo'"
            [formControl]="this.aircraftForm.get('aircraftType')"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('aircraftType')">
                <span
                  *ngIf="this.aircraftForm.get('aircraftType').errors.required"
                  class="helper-text"
                  data-error="Debe indicar un Tipo"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-select>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-insuranceEndDate'"
            [label]="'Caducidad del seguro'"
            [hasErrors]="hasControlAnyError('insuranceEndDate')"
            formControlName="insuranceEndDate"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('insuranceEndDate')">
                <span
                  *ngIf="
                    hasControlSpecificError('insuranceEndDate', 'required')
                  "
                  class="helper-text"
                  data-error="Debe indicar una fecha"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-productionYear'"
            [label]="'Año de fabricación'"
            [type]="'number'"
            [hasErrors]="hasControlAnyError('productionYear')"
            formControlName="productionYear"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('productionYear')">
                <span
                  *ngIf="hasControlSpecificError('productionYear', 'required')"
                  class="helper-text"
                  data-error="Debe indicar el año de fabricación"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-plateNumber'"
            [label]="'Matrícula'"
            [hasErrors]="hasControlAnyError('plateNumber')"
            formControlName="plateNumber"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('plateNumber')">
                <span
                  *ngIf="hasControlSpecificError('plateNumber', 'required')"
                  class="helper-text"
                  data-error="Debe indicar la matrícula"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-checkbox
            (selectedValueEvent)="onChangeCheck($event)"
            [id]="'check-button-bar'"
            [label]="'Ambulancia'"
            [disabled]="aircraftForm.disabled"
            [value]="aircraftForm.get('ambulance').value"
            class="check"
          ></core-checkbox>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-insideUpgradeDate'"
            [label]="'Año última reforma interior'"
            [hasErrors]="hasControlAnyError('insideUpgradeDate')"
            formControlName="insideUpgradeDate"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('insideUpgradeDate')">
                <span
                  *ngIf="
                    hasControlSpecificError('insideUpgradeDate', 'required')
                  "
                  class="helper-text"
                  data-error="Debe indicar el año de última reforma interior"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-outsideUpgradeDate'"
            [label]="'Año última reforma exterior'"
            [hasErrors]="hasControlAnyError('outsideUpgradeDate')"
            formControlName="outsideUpgradeDate"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('outsideUpgradeDate')">
                <span
                  *ngIf="
                    hasControlSpecificError('outsideUpgradeDate', 'required')
                  "
                  class="helper-text"
                  data-error="Debe indicar el año de última reforma exterior"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <ul class="collapsible expandable cmd-mb-2" appMatCollapsible>
          <li>
            <div class="collapsible-header">
              <i class="material-icons">keyboard_arrow_down</i>Bases
            </div>
            <div class="collapsible-body">
              <span>
                <section class="aircraft-role-detail-table">
                  <core-table
                    [columnsHeader]="aircraftBaseColumnsHeader"
                    [columnsData]="aircraftBaseColumnsData"
                    [pagination]="aircraftBaseColumnsPagination"
                  ></core-table>
                </section>
              </span>
            </div>
          </li>
        </ul>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-daytimeConfiguration'"
            [type]="'number'"
            [label]="'Configuración de día'"
            [hasErrors]="hasControlAnyError('daytimeConfiguration')"
            formControlName="daytimeConfiguration"
          >
            <ng-container inputErrors>
              <ng-container *ngIf="hasControlAnyError('daytimeConfiguration')">
                <span
                  *ngIf="
                    hasControlSpecificError('daytimeConfiguration', 'required')
                  "
                  class="helper-text"
                  data-error="Debe indicar una configuración"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>

        <div class="row">
          <core-basic-input-text
            [id]="'aircraft-nighttimeConfiguration'"
            [type]="'number'"
            [label]="'Configuración de noche'"
            [hasErrors]="hasControlAnyError('nighttimeConfiguration')"
            formControlName="nighttimeConfiguration"
          >
            <ng-container inputErrors>
              <ng-container
                *ngIf="hasControlAnyError('nighttimeConfiguration')"
              >
                <span
                  *ngIf="
                    hasControlSpecificError(
                      'nighttimeConfiguration',
                      'required'
                    )
                  "
                  class="helper-text"
                  data-error="Debe indicar una configuración"
                >
                </span>
              </ng-container>
            </ng-container>
          </core-basic-input-text>
        </div>
      </form>
    </section>

    <ul class="collapsible expandable cmd-m-2" appMatCollapsible>
      <li>
        <div class="collapsible-header">
          <i class="material-icons">keyboard_arrow_down</i>Observaciones
        </div>
        <div class="collapsible-body">
          <span>
            <section class="user-task-detail-table">
              <core-table
                [columnsHeader]="aircraftObservationsColumnsHeader"
                [columnsData]="aircraftObservationsColumnsData"
                [pagination]="aircraftObservationsColumnsPagination"
              ></core-table>
            </section>
          </span>
        </div>
      </li>
    </ul>
    <pre>
      {{ aircraftDetail | json }}
    </pre>
  </div>
  <div class="modal-footer">
    <a
      class="btn modal-close waves-effect europair-icon-blue-1 cmd-w-100"
      *ngIf="aircraftForm.disabled; else saveBtn"
    >
      <i class="material-icons">check_circle</i>
      <span
        class="full-width-btn-text"
        *ngIf="aircraftForm.disabled; else saveBtn"
      >
        Confirmar
      </span>
    </a>
    <ng-template #saveBtn>
      <a
        class="btn modal-close waves-effect europair-icon-blue-1 cmd-w-100"
        [ngClass]="{ disabled: !aircraftForm.valid }"
        (click)="onSaveAircraft()"
      >
        <i class="material-icons">check_circle</i>
        <span class="full-width-btn-text">Guardar</span>
      </a>
    </ng-template>
  </div>
</div>
